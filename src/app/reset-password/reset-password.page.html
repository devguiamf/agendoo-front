<ion-content [fullscreen]="true" class="reset-password-content">
  <div class="reset-password-container">
    <div class="logo-section">
      <h1 class="app-title">Agendoo</h1>
      <p class="app-subtitle">Redefinir senha</p>
    </div>

    <div class="form-section">
      <ion-card class="form-card">
        <!-- Verificando token -->
        @if (isVerifying) {
          <ion-card-content>
            <div class="loading-state">
              <ion-spinner name="crescent"></ion-spinner>
              <p>Verificando link...</p>
            </div>
          </ion-card-content>
        }
        
        <!-- Token inv√°lido -->
        @else if (!tokenValid && !resetSuccess) {
          <ion-card-header>
            <ion-card-title class="form-title error">
              <ion-icon name="alert-circle-outline"></ion-icon>
              Link inv√°lido
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="error-message">
              <p>Este link de redefini√ß√£o de senha √© inv√°lido ou j√° expirou.</p>
              <p class="hint">Os links expiram ap√≥s 1 hora. Solicite um novo link de redefini√ß√£o.</p>
            </div>
            <div class="form-actions">
              <ion-button expand="block" (click)="navigateToLogin()" class="back-button">
                <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
                Voltar para o login
              </ion-button>
            </div>
          </ion-card-content>
        }
        
        <!-- Sucesso -->
        @else if (resetSuccess) {
          <ion-card-header>
            <ion-card-title class="form-title success">
              <ion-icon name="checkmark-circle-outline"></ion-icon>
              Senha redefinida!
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="success-message">
              <div class="success-icon">üéâ</div>
              <p>Sua senha foi redefinida com sucesso!</p>
              <p class="hint">Agora voc√™ pode fazer login com sua nova senha.</p>
            </div>
            <div class="form-actions">
              <ion-button expand="block" (click)="navigateToLogin()" class="submit-button">
                Ir para o login
              </ion-button>
            </div>
          </ion-card-content>
        }
        
        <!-- Formul√°rio de nova senha -->
        @else {
          <ion-card-header>
            <ion-card-title class="form-title">
              <ion-icon name="lock-closed-outline"></ion-icon>
              Nova senha
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            @if (email) {
              <p class="email-info">
                Redefinindo senha para: <strong>{{ email }}</strong>
              </p>
            }
            
            <form (ngSubmit)="handleSubmit()" class="reset-form">
              <ion-item class="form-item">
                <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
                <ion-label position="stacked">Nova senha</ion-label>
                <ion-input
                  type="password"
                  placeholder="M√≠nimo 6 caracteres"
                  [(ngModel)]="password"
                  required
                  name="password"
                ></ion-input>
              </ion-item>

              <ion-item class="form-item">
                <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
                <ion-label position="stacked">Confirmar senha</ion-label>
                <ion-input
                  type="password"
                  placeholder="Digite novamente"
                  [(ngModel)]="confirmPassword"
                  required
                  name="confirmPassword"
                ></ion-input>
              </ion-item>

              <div class="form-actions">
                <ion-button expand="block" type="submit" class="submit-button" [disabled]="!password || !confirmPassword || isLoading">
                  {{ isLoading ? 'Redefinindo...' : 'Redefinir senha' }}
                </ion-button>
              </div>
            </form>

            <div class="link-section">
              <ion-button fill="clear" (click)="navigateToLogin()" class="back-link">
                <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
                Voltar para o login
              </ion-button>
            </div>
          </ion-card-content>
        }
      </ion-card>
    </div>
  </div>
</ion-content>

