<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  @if (isLoading) {
    <div class="loading-container">
      <ion-spinner></ion-spinner>
      <p>Carregando perfil...</p>
    </div>
  } @else if (user) {
    <div class="profile-container">
      <div class="profile-header">
        <ion-avatar class="profile-avatar">
          <div class="avatar-placeholder">
            <ion-icon name="person-outline"></ion-icon>
          </div>
        </ion-avatar>
        <h2 class="profile-name">{{ user.name }}</h2>
        <p class="profile-type">Cliente</p>
        <ion-button fill="outline" (click)="openEditModal()" class="edit-button">
          <ion-icon name="create-outline" slot="start"></ion-icon>
          Editar Perfil
        </ion-button>
      </div>

      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title>Informações Pessoais</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item lines="none" class="info-item">
              <ion-icon name="person-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>Nome</h3>
                <p>{{ user.name }}</p>
              </ion-label>
            </ion-item>

            <ion-item lines="none" class="info-item">
              <ion-icon name="mail-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>E-mail</h3>
                <p>{{ user.email }}</p>
              </ion-label>
            </ion-item>

            <ion-item lines="none" class="info-item">
              <ion-icon name="call-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>Telefone</h3>
                <p>{{ formatPhone(user.phone) }}</p>
              </ion-label>
            </ion-item>

            <ion-item lines="none" class="info-item">
              <ion-icon name="document-text-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>CPF</h3>
                <p>{{ user.cpf || 'Não informado' }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>

      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title>Informações da Conta</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item lines="none" class="info-item">
              <ion-icon name="calendar-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>Conta criada em</h3>
                <p>{{ formatDate(user.createdAt) }}</p>
              </ion-label>
            </ion-item>

            <ion-item lines="none" class="info-item">
              <ion-icon name="time-outline" slot="start" class="info-icon"></ion-icon>
              <ion-label>
                <h3>Última atualização</h3>
                <p>{{ formatDate(user.updatedAt) }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </div>
  } @else {
    <div class="error-container">
      <p>Erro ao carregar perfil</p>
    </div>
  }
</ion-content>

